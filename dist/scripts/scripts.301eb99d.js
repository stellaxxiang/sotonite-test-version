"use strict";angular.module("odcw2App",["ngAnimate","ngAria","ui.router","ngMap"]).config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("")}]).config(["$stateProvider",function(a){a.state("home",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("atm",{url:"/atm",templateUrl:"views/atmTemplate.html",controller:"atmController",resolve:{atmData:["atmService",function(a){return a.getAtms().then(function(a){return a})}]}})}]).config(["$urlRouterProvider",function(a){a.when("/","/"),a.otherwise("/")}]),angular.module("odcw2App").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("odcw2App").controller("atmController",["$scope","atmData","NgMap",function(a,b,c){a.atms=[],a.markers=[],a.visibleMarkers=[],a.atms=b,a.ATMdetail={},a.atms_list_show=!0,a.atms_detail_show=!1,a.init=function(){console.log("View initialized"),c.getMap().then(function(b){console.log("Map initialized."),a.map=b,a.ATMIconBlue={url:"../../images/ATMIconBlue.68614b9d.svg",scaledSize:[45,45],anchor:[25,25]},a.ATMIconRed={url:"../../images/ATMIconRed.56635e2c.svg",scaledSize:[45,45],anchor:[25,25]}})},a.mapEvent={idle:function(){a.visibleMarkers.length=0,a.GMap=a.map.control.getGMap();for(var b=0;b<a.markers.length;b++){var c=new google.maps.LatLng(a.markers[b].latitude,a.markers[b].longitude);a.GMap.getBounds().contains(c)&&a.visibleMarkers.push(a.markers[b])}}};for(var d=0;d<a.atms.length;d++)a.markers.push({id:d,latitude:a.atms[d].coordinates.latitude,longitude:a.atms[d].coordinates.longitude,title:a.atms[d].name,content:a.atms[d].label,options:{draggable:!1}});a.markersEvent={mouseover:function(b,c,d,e){b.setIcon(a.ATMIconRed),a.$apply()},mouseout:function(b,c,d,e){b.setIcon(a.ATMIconBlue),a.$apply()},click:function(b,c,d,e){a.showWindowAndDetail(d),a.$apply()}},a.window={marker:{},show:!1,closeClick:function(){this.show=!1},options:{},title:"",content:""},a.backToList=function(){a.atms_list_show=!0,a.atms_detail_show=!1},a.showWindowAndDetail=function(b){a.window.model=b,a.window.title=b.title,a.window.content=b.content,a.window.show=!0,a.ATMdetail=a.atms[b.id],a.atms_list_show=!1,a.atms_detail_show=!0}}]),angular.module("odcw2App").service("atmService",["$http",function(a){var b="https://odi-cw2-api.herokuapp.com/api/v1/atms";this.getAtms=function(){return a.get(b).then(function(a){return console.log(a.data),a.data})}}]),angular.module("odcw2App").run(["$templateCache",function(a){a.put("views/atmTemplate.html",'<div ng-init="init()"> <div class="map_wrap"> <div id="atms_map"> <ng-map center="[50.936, -1.395]" zoom="16" styles="[{ featureType: \'poi.business\',stylers: [{ visibility: \'off\'}]}]"> <!--ui-gmap-window show="window.show" \r\n								coords="window.model" \r\n								options="window.options" \r\n								closeClick="window.closeClick()">\r\n					<div style="color: black">\r\n						{{window.title}}<br/>\r\n						{{window.content}}\r\n					</div>\r\n				</ui-gmap-window--> <marker ng-repeat="marker in markers" position="{{marker.latitude}}, {{marker.longitude}}" title="{{marker.title}}" icon="{{ATMIconBlue}}"> </marker> </ng-map> </div> </div> <div class="detail_wrap"> <div id="atms_list" ng-repeat="atm in visibleMarkers" ng-show="atms_list_show"> <p ng-click="showWindowAndDetail(atm)">{{atm.content}}</p> </div> <div id="atms_details" ng-show="atms_detail_show"> <div class="atms_details_title"> <div class="details_title"> ATM name: </div> <div class="details_title_name"> {{ATMdetail.name}} </div> </div> <div class="atms_details_content"> <div class="details_content"> <table class="details_table"> <tr> <td>Address:</td> <td>{{ATMdetail.label}}</td> </tr> <tr ng-if="ATMdetail.building !== \'\'"> <td>Located building on campus:</td> <td>{{ATMdetail.building}}</td> </tr> <tr ng-if="ATMdetail.fee !== \'\'"> <td>Fee:</td> <td>{{ATMdetail.fee}}</td> </tr> </table> </div> </div> <div class="back_to_list" ng-click="backToList()">Back to list</div> </div> </div> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.c582c4d1.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <pre>{{singleModel}}</pre> <button type="button" class="btn btn-primary" ng-model="singleModel" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> Single Toggle </button> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>')}]);